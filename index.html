import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import { getDatabase, ref, get, child, onValue } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

let randomNumber = 1;
let attemptsLeft = 0;
let password = "";

// Einstellungen laden wie vorher
async function loadSettings() {
  const snapshot = await get(child(ref(db), "settings"));
  if(snapshot.exists()){
    const data = snapshot.val();
    attemptsLeft = data.maxAttempts || 6;
    password = data.password || "";

    if(data.randomNumber){
      randomNumber = Math.floor(Math.random() * 50) + 1;
    } else {
      randomNumber = data.fixedNumber || 1;
    }

    info.textContent = `Du hast ${attemptsLeft} Versuche! ðŸ˜Ž`;
  } else {
    info.textContent = "âš ï¸ Einstellungen nicht gefunden.";
  }
}

await loadSettings();

// ðŸ”¹ Ãœberwachen, ob Admin den Reload-Button gedrÃ¼ckt hat
const reloadRef = ref(db, "reloadTrigger");
onValue(reloadRef, (snapshot) => {
  if(snapshot.exists()){
    // Seite neu laden
    location.reload();
  }
});